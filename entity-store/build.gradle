dependencies {
    compile project(':vfs')
    testCompile project(':utils').sourceSets.test.output
}

// do not build tests artifact if there is task 'uploadArchives' (fixes XD-406)
if (!gradle.startParameter.getTaskNames().contains('uploadArchives')) {
    task jarTests(type: Jar) {
        from project.sourceSets.test.output
    }

    if (version.endsWith('SNAPSHOT')) {
        jarTests.archiveName = rootProject.name + '-' + project.name + '-tests.jar'
    } else {
        jarTests.archiveName = rootProject.name + '-' + project.name + '-tests-' + version + '.jar'
    }

    artifacts {
        archives jarTests
    }
}